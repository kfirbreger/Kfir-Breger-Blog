<!doctype html>
<!-- https://github.com/paulirish/html5-boilerplate/blob/master/index.html -->
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    
    <!-- encoding must be specified within the first 512 bytes
        www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#charset -->
    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
        Remove this if you use the .htaccess
    <meta http-equiv="X-UA-Compatible" content="" -->>


    <!-- meta element for compatibility mode needs to be before
        all elements except title & meta
        msdn.microsoft.com/en-us/library/cc288325(VS.85).aspx -->
    <!-- Chrome Frame is only invoked if meta element for
        compatibility mode is within the first 1K bytes
        code.google.com/p/chromium/issues/detail?id=23003 -->

    <title>kfirbreger.com</title>
    <meta name="author" content="Kfir Breger">

    <!--  Mobile viewport optimized: j.mp/bplateviewport -->
    <meta name="viewport" content="">

    
    <!-- Place favicon.ico & apple-touch-icon.png
        in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="/theme/favicon.ico">
    <link rel="apple-touch-icon" href="/theme/apple-touch-icon.png">
    

    
    <link rel="stylesheet" href="/theme/css/bootstrap.min.css">
    <link rel="stylesheet" href="/theme/css/bootstrap-responsive.min.css">
    

    
    <!-- All JavaScript at the bottom, except for Modernizr which
        enables HTML5 elements & feature detects
        <script src="/theme/js/modernizr.foundation.js"></script> -->
    
    
    
</head>
<body>
    
    <div id="container">
        
        <div id="main" role="main">
            <header class="banner clearfix">
                
    <h1 class="article-title">
        <a href="" rel="bookmark" title="Permalink to Views 2 integration and custom handlers in Drupal 6">Views 2 integration and custom handlers in Drupal 6</a>
    </h1>

                
                <nav>
                </nav>
                
            </header>
            
<section id="article">
    <article>
        <p>As part of a large scale project at work, I needed to create an integration
between views and a module I was writing. For it to function properly, a
custom handler was also needed. Unfortunately there was very little
information to be found about how this must be done. The integration process
is not that complex, and it can be understood from the code sample given in
the views 2 docs. A custom handler however proved to be somewhat more elusive.
To do my part in helping clear some of it up, I will give a simplified, step
by step, guide how I have solved this. I am by no means an expert when it
comes to views, and it is possible that there are better solutions out there.
I, however, was unable to find them.</p>
<h3>The Setup</h3>
<p>As a simplified version of the actual module we will imagine a module that is
intended to collect messages generated by users actions. The module will then
show actions generated by your "friends". Think something like Facebooks news
feed. How you befriend someone or how the messages are generated are not
important for this guide, so just assume that it all goes well. When it does
pay a roll, I will give all the needed information.</p>
<p>Our module is called buzz.</p>
<h3>Data Structure</h3>
<p>The messages have a few pre-set forms (think facebook's news feed again) with
a few values that change. For instance</p>
<p>username has added a photo to his profile</p>
<p>To minimize the amount of data in the database we will define table that
contains the text of he message, and which arguments are expected. In this
way, the actual message just needs to save the message type and the arguments,
preventing repeating the whole message. It also gives more flexibility in
changing the form of the message to all messages at once.</p>
<p>The following schema</p>
<p><a href="../../static/static/images/01/buzz-db-schema.png"><img alt="Schema describing the database" src="../../static/static/images/buzz-db-schema-" title="300x213.png" /></a></p>
<p>represent how the data is being saved into the database. The database tables
are built using hook_schema() and hook_install(). The messages are entered
into the database via an API that the module offers. The specifics are not
important for this post, though if there will be demand for it I will post
about it.</p>
<h3>Views Integration</h3>
<p>There are quite a few advantages to integrate your module's data module with
views.</p>
<ul>
<li>Flexibility in representation of data</li>
<li>Easier for other people to work with your module</li>
</ul>
<p>To name two major ones. Views integration is done through the use of the
hook_views_data(). What this hook does basically is tell views all that it
needs to know in order to be able to work with your data model. I'll give the
implementation first, followed by an explaintion.</p>
<div class="codehilite"><pre><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">buzz_views_data</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;buzz_message_types&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;table&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;group&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Buzz&#39;</span><span class="p">),</span>
            <span class="s1">&#39;join&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;buzz_messages&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;left_field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;msg_type_id&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Message type ID&#39;</span><span class="p">),</span>
            <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;ID of the message type.&#39;</span><span class="p">),</span>
            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_field&#39;</span><span class="p">,</span>
                <span class="s1">&#39;click sortable&#39;</span> <span class="o">=&gt;</span> <span class="k">TRUE</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_sort&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_filter_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;argument&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_argument_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="s1">&#39;args_type&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Arguments type&#39;</span><span class="p">),</span>
            <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;What type of arguments this message type expect.&#39;</span><span class="p">),</span>
            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_field&#39;</span><span class="p">,</span>
                <span class="s1">&#39;click sortable&#39;</span> <span class="o">=&gt;</span> <span class="k">TRUE</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_sort&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_filter_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;argument&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_argument_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="s1">&#39;txt&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Message base text&#39;</span><span class="p">),</span>
            <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Text of the message type, with the wildcards not filled&#39;</span><span class="p">),</span>
            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_field&#39;</span><span class="p">,</span>
                <span class="s1">&#39;click sortable&#39;</span> <span class="o">=&gt;</span> <span class="k">TRUE</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_sort&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_filter_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;argument&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_argument_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">);</span>
    <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;buzz_messages&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;table&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;group&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Buzz&#39;</span><span class="p">),</span>
            <span class="s1">&#39;base&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
                <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Messages&#39;</span><span class="p">),</span>
                <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Messages table&#39;</span><span class="p">),</span>
            <span class="p">),</span>
            <span class="s1">&#39;join&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;users&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;left_table&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;buzz_message_usr&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;left_field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;msg_id&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;real_field&#39;</span> <span class="o">=&gt;</span> <span class="k">FALSE</span><span class="p">,</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;The message&#39;</span><span class="p">),</span>
            <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;The composed message, built from the message type and the arguments.&#39;</span><span class="p">),</span>
            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;buzz_handler_field_message&#39;</span><span class="p">,</span>
                <span class="s1">&#39;click sortable&#39;</span> <span class="o">=&gt;</span> <span class="k">TRUE</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Message ID&#39;</span><span class="p">),</span>
            <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;ID of the Buzz message.&#39;</span><span class="p">),</span>
            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_field_numeric&#39;</span><span class="p">,</span>
                <span class="s1">&#39;click sortable&#39;</span> <span class="o">=&gt;</span> <span class="k">TRUE</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_filter_numeric&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_sort&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="s1">&#39;msg_type_id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Message type ID in messages table&#39;</span><span class="p">),</span>
            <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;The ID of the message type.&#39;</span><span class="p">),</span>
            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_field&#39;</span><span class="p">,</span>
                <span class="s1">&#39;click sortable&#39;</span> <span class="o">=&gt;</span> <span class="k">TRUE</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_sort&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_filter_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;argument&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_argument_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="s1">&#39;args&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Message arguments&#39;</span><span class="p">),</span>
            <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Arguments used to build the message&#39;</span><span class="p">),</span>
            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_field&#39;</span><span class="p">,</span>
                <span class="s1">&#39;click sortable&#39;</span> <span class="o">=&gt;</span> <span class="k">TRUE</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_sort&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_filter_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;argument&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_argument_string&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="s1">&#39;created&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Message creation time&#39;</span><span class="p">),</span>
            <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;The time in which the message was created.&#39;</span><span class="p">),</span>
            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_field_date&#39;</span><span class="p">,</span>
                <span class="s1">&#39;click sortable&#39;</span> <span class="o">=&gt;</span> <span class="k">TRUE</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_sort_date&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_filter_date&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
               <span class="s1">&#39;usr_id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;User ID&#39;</span><span class="p">),</span>
            <span class="s1">&#39;help&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;ID of the user that has generated this message&#39;</span><span class="p">),</span>
            <span class="s1">&#39;relationship&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;base&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span>
                <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;uid&#39;</span><span class="p">,</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_relationship&#39;</span><span class="p">,</span>
                <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Users&#39;</span><span class="p">),</span>
            <span class="p">),</span>
            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_field_numeric&#39;</span><span class="p">,</span>
                <span class="s1">&#39;click sortable&#39;</span> <span class="o">=&gt;</span> <span class="k">TRUE</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_filter_numeric&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;views_handler_sort&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>Lets look at what everything does.</p>
<p>First thing is defining an array. This array, called <code>$data</code>, will contain the
information describing to views how the data of our module is built. Each
table in out database will be represented by a separate entry in the the array
with the key being the database table name. In our case the module has two
tables, buzz_message_type and buzz_messages, and therefore the array has two
entries.</p>
<p>Each database table entry is in itself an array. In this array we give views
general information about the table as well information about each column.
Before we continue lets me explain what a base table in views is.</p>
<p>When creating a new view, you get to choose what will be used as a base table
for that view. That is, views will start with that table as its beginning
values and will expand from there as needed (through the use of
relationships). Those tables (such as node, users) are defined for views as
base tables. If you are interested in building views that are based upon your
modules information, it can be helpful to define one of your modules table as
a base table. Note that you can integrate your information with views without
defining a base table (we will see that soon). In our case, since we are
interested in creating views that represent only messages we will define the
messages table as a base table.</p>
    </article>
    
    <p>tags:
        
            <a href="../.././">drupal</a>
        
            <a href="../.././">programming</a>
        
            <a href="../.././">views2</a>
        
            <a href="../.././">web</a>
        
            <a href="../.././">web</a>
        
            <a href="../.././">work</a>
        
    </p>


    <div class="share">
        
    <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="kfirbreger">Tweet</a>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>

    </div>
</section>

        </div>
        
    </div> <!--! end of #container -->
    <footer>
        
        
    </footer>
    
    
    <!-- Javascript at the bottom for fast page loading -->
    
    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
    <script>window.jQuery || document.write('<script src="js/libs/jquery.min.js">\x3C/script>')</script>
    

    
    <script src="/theme/js/bootstrap.js"></script>
    
    
</body>
</html>