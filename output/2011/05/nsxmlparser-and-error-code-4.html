<!doctype html>
<!-- https://github.com/paulirish/html5-boilerplate/blob/master/index.html -->
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    
    <!-- encoding must be specified within the first 512 bytes
        www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#charset -->
    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
        Remove this if you use the .htaccess
    <meta http-equiv="X-UA-Compatible" content="" -->>


    <!-- meta element for compatibility mode needs to be before
        all elements except title & meta
        msdn.microsoft.com/en-us/library/cc288325(VS.85).aspx -->
    <!-- Chrome Frame is only invoked if meta element for
        compatibility mode is within the first 1K bytes
        code.google.com/p/chromium/issues/detail?id=23003 -->

    <title>kfirbreger.com</title>
    <meta name="author" content="Kfir Breger">

    <!--  Mobile viewport optimized: j.mp/bplateviewport -->
    <meta name="viewport" content="">

    
    <!-- Place favicon.ico & apple-touch-icon.png
        in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="/theme/favicon.ico">
    <link rel="apple-touch-icon" href="/theme/apple-touch-icon.png">
    

    
    <link rel="stylesheet" href="/theme/css/bootstrap.min.css">
    <link rel="stylesheet" href="/theme/css/bootstrap-responsive.min.css">
    

    
    <!-- All JavaScript at the bottom, except for Modernizr which
        enables HTML5 elements & feature detects
        <script src="/theme/js/modernizr.foundation.js"></script> -->
    
    
    
</head>
<body>
    
    <div id="container">
        
        <div id="main" role="main">
            <header class="banner clearfix">
                
    <h1 class="article-title">
        <a href="" rel="bookmark" title="Permalink to NSXMLParser and error code 4">NSXMLParser and error code 4</a>
    </h1>

                
                <nav>
                </nav>
                
            </header>
            
<section id="article">
    <article>
        <p>Today I had one of the strangest bugs I have seen to date. I am working on an
iOS app that does Â a lot of communication with a web app api. the
communication is done via XML. Since the web app requires autherntication, I
am useing specific requests and placing the response xml in a string.</p>
<p>NSXMLParser requires a NSData object to init with data. Following the
conversion cod eI found on Apple's site I did the following:</p>
<p><code>NSData *xmlData = [NSData dataWithBytes:[xml
dataUsingEncoding:NSUTF8StringEncoding] length:[xml
lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];</code></p>
<p>Passing the xmlData through to the parser ended in me getting an error 4,
which means document empty. I tried everything. Printed out the xml string to
see it was full, compared length of data and string, releasing the parser.
Still error 4. For the heck of it I tried giving the parser a nil for data.
That gave an error 5. Trying to give an empty NSData object also gave error
code 4. After 3 hours spent in google and stack overflow I was not even a
small step further.</p>
<p>I really didn't know what to do when, while scanning all these pages I saw a
piece of code of converting the string to data without giving the length. for
the heck of it I decided to try this:</p>
<p><code>NSData* xmlData = [xml dataUsingEncoding:NSUTF8StringEncoding];</code></p>
<p>What do you know it worked. No idea why. Naturally. I wanted to know what the
length of the data object was now. I was fully expecting it to be bigger than
original. To my surprise it was the same length as the string. The same length
I was giving it in the first call.</p>
<p>Why this now wrks I have no idea. The first and the second calls should give
the same results, yet somehow they don't. If you got this problem, then
converting without giving the function a length. Good luck and happy
programming.</p>
    </article>
    
    <p>tags:
        
            <a href="../.././">cocoa</a>
        
            <a href="../.././">ios</a>
        
            <a href="../.././">objective c</a>
        
            <a href="../.././">programming</a>
        
            <a href="../.././">work</a>
        
            <a href="../.././">xml</a>
        
    </p>


    <div class="share">
        
    <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="kfirbreger">Tweet</a>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>

    </div>
</section>

        </div>
        
    </div> <!--! end of #container -->
    <footer>
        
        
    </footer>
    
    
    <!-- Javascript at the bottom for fast page loading -->
    
    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
    <script>window.jQuery || document.write('<script src="js/libs/jquery.min.js">\x3C/script>')</script>
    

    
    <script src="/theme/js/bootstrap.js"></script>
    
    
</body>
</html>